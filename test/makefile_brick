
CXX	= g++
CXXFLAGS = -std=c++11 -O3 -Wall

AR	= ar
ARFLAGS	= rcv
RANLIB	= ranlib
RM	= rm
ECHO	= echo

jetscape_src = ../src
external_lib = ../external_packages/lib
wrapper_src = ../wrappers/

INCLUDES =
OBJECTS	= test_brick_main.o brick_jetscape.o fluid_dynamics.o
OBJLIBS	=
LIBS	=  -L$(external_lib) -L$(wrapper_src)
EXECUTABLE = test_brick_main

all: $(OBJECTS) $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS) $(OBJLIBS) 
	$(CXX) $(CXXFLAGS) $(OBJECTS) $(OBJLIBS) $(LIBS) -o $@

test_brick_main.o: $(OBJLIBS) test_brick_main.cpp
	$(CXX) $(CXXFLAGS) -c $(INCLUDES) test_brick_main.cpp

brick_jetscape.o : $(OBJLIBS) $(wrapper_src)/brick_jetscape.cpp
	$(CXX) $(CXXFLAGS) -c $(INCLUDES) $(wrapper_src)/brick_jetscape.cpp

fluid_dynamics.o : $(jetscape_src)/fluid_dynamics.cpp
	$(CXX) $(CXXFLAGS) -c $(INCLUDES) $(jetscape_src)/fluid_dynamics.cpp


.PHONY: clean # explicitly declare 'clean' to be PHONY
clean :
	-$(RM) -f $(OBJECTS)
	-for d in $(external_src); do (cd $$d; $(MAKE) -f Makefile_lib clean ); done

distclean :
	-$(RM) -f $(EXECUTABLE) $(OBJECTS)
	-for d in $(external_src); do (cd $$d; $(MAKE) -f Makefile_lib clean ); done

force_look :
	true
